{"version":3,"sources":["components/PostsList/PostsList.tsx","api/api.ts","api/posts.ts","api/comments.ts","components/NewCommentForm/NewCommentForm.tsx","components/PostDetails/PostDetails.tsx","App.tsx","api/users.ts","index.tsx"],"names":["PostsList","props","posts","openPost","setOpenPost","className","map","post","userId","title","id","type","onClick","BASE_URL","getPosts","fetch","then","response","json","getPostDetails","postId","getComments","addComment","name","email","body","method","headers","JSON","stringify","NewCommentForm","updateComments","useState","currentName","setCurrentName","currentEmail","setCurrentEmail","currentText","setCurrentText","handleAddComment","a","handleSubmit","event","preventDefault","onSubmit","placeholder","value","onChange","target","PostDetails","createdAt","updatedAt","postDetails","setPostDetails","comments","setComments","hidden","setHidden","currentPostDetails","currentComments","currentPostId","useEffect","handleRemoveComment","comment","commentId","length","App","setPosts","selectedPostId","setSelectedPostId","setUserId","users","setUsers","getAllPosts","getAllUsers","htmlFor","user","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bae0b3a1.chunk.js","sourcesContent":["import React from 'react';\nimport './PostsList.scss';\n\ntype Props = {\n  posts: Post[];\n  openPost: number;\n  setOpenPost: (value: number) => void\n};\n\nexport const PostsList: React.FC<Props> = (props) => {\n  const { posts, openPost, setOpenPost } = props;\n\n  return (\n    <div className=\"PostsList\">\n      <h2>Posts:</h2>\n\n      <ul className=\"PostsList__list\">\n        {posts.map(post => (\n          <li className=\"PostsList__item\" key={post.id}>\n            <div>\n              <b>{`[User #${post.userId}]: `}</b>\n              {post.title}\n            </div>\n            {openPost !== post.id\n              ? (\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  onClick={() => setOpenPost(post.id)}\n                >\n                  Open\n                </button>\n              )\n              : (\n                <button\n                  type=\"button\"\n                  className=\"PostsList__button button\"\n                  onClick={() => setOpenPost(0)}\n                >\n                  Close\n                </button>\n              )}\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n","export const BASE_URL = 'https://mate.academy/students-api';\n","import { BASE_URL } from './api';\n\nexport const getPosts = (userId: number) => {\n  if (userId !== 0) {\n    return fetch(`${BASE_URL}/posts?userId=${userId}`)\n      .then(response => response.json());\n  }\n\n  return fetch(`${BASE_URL}/posts`)\n    .then(response => response.json());\n};\n\nexport const getPostDetails = (postId: number) => {\n  return fetch(`${BASE_URL}/posts/${postId}`)\n    .then(response => response.json());\n};\n","import { BASE_URL } from './api';\n\nexport const getComments = (postId: number) => {\n  return fetch(`${BASE_URL}/comments?postId=${postId}`)\n    .then(response => response.json());\n};\n\nexport const deleteComment = (commentId: number) => {\n  return fetch(`${BASE_URL}/comments/${commentId}`, {\n    method: 'DELETE',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  });\n};\n\nexport const addComment = (postId: number, name: string, email: string, body: string) => {\n  return fetch(`${BASE_URL}/comments`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify({\n      postId,\n      name,\n      email,\n      body,\n    }),\n  });\n};\n","import React, { useState } from 'react';\nimport { addComment } from '../../api/comments';\nimport './NewCommentForm.scss';\n\ntype Props = {\n  postId: number\n  updateComments: (currentPostId: number) => Promise<void>\n};\n\nexport const NewCommentForm: React.FC<Props> = (props) => {\n  const { postId, updateComments } = props;\n  const [currentName, setCurrentName] = useState('');\n  const [currentEmail, setCurrentEmail] = useState('');\n  const [currentText, setCurrentText] = useState('');\n  const handleAddComment = async () => {\n    await addComment(postId, currentName, currentEmail, currentText);\n    updateComments(postId);\n  };\n\n  const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    await handleAddComment();\n    setCurrentName('');\n    setCurrentEmail('');\n    setCurrentText('');\n  };\n\n  return (\n    <form\n      className=\"NewCommentForm\"\n      onSubmit={handleSubmit}\n    >\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"name\"\n          placeholder=\"Your name\"\n          className=\"NewCommentForm__input\"\n          value={currentName}\n          onChange={(event) => setCurrentName(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <input\n          type=\"text\"\n          name=\"email\"\n          placeholder=\"Your email\"\n          className=\"NewCommentForm__input\"\n          value={currentEmail}\n          onChange={(event) => setCurrentEmail(event.target.value)}\n        />\n      </div>\n\n      <div className=\"form-field\">\n        <textarea\n          name=\"body\"\n          placeholder=\"Type comment here\"\n          className=\"NewCommentForm__input\"\n          value={currentText}\n          onChange={(event) => setCurrentText(event.target.value)}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        className=\"NewCommentForm__submit-button button\"\n      >\n        Add a comment\n      </button>\n    </form>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport { getPostDetails } from '../../api/posts';\nimport { NewCommentForm } from '../NewCommentForm';\nimport { getComments, deleteComment } from '../../api/comments';\nimport './PostDetails.scss';\n\ntype Props = {\n  postId: number\n};\n\nexport const PostDetails: React.FC<Props> = (props) => {\n  const { postId } = props;\n  const [postDetails, setPostDetails] = useState<Post>({\n    id: 0,\n    createdAt: '',\n    updatedAt: '',\n    userId: 0,\n    title: '',\n    body: '',\n  });\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [hidden, setHidden] = useState(false);\n  const currentPostDetails = async () => {\n    setPostDetails(await getPostDetails(postId));\n  };\n\n  const currentComments = async (currentPostId: number) => {\n    setComments(await getComments(currentPostId));\n  };\n\n  useEffect(() => {\n    currentPostDetails();\n    currentComments(postId);\n  }, [postId]);\n\n  const handleRemoveComment = async (comment: Comment) => {\n    await deleteComment(comment.id);\n    currentComments(postId);\n  };\n\n  return (\n    <div className=\"PostDetails\">\n      <h2>Post details:</h2>\n\n      {!!postId && (\n        <>\n          <section className=\"PostDetails__post\">\n            <p>{postDetails.title}</p>\n          </section>\n\n          <section className=\"PostDetails__comments\">\n            <button\n              type=\"button\"\n              className=\"button\"\n              onClick={() => setHidden(!hidden)}\n            >\n              {!hidden ? `Hide ${comments.length} comments`\n                : `Show ${comments.length} comments`}\n            </button>\n\n            {!hidden && (\n              <ul className=\"PostDetails__list\">\n                {comments.map(comment => (\n                  <li className=\"PostDetails__list-item\" key={comment.id}>\n                    <button\n                      type=\"button\"\n                      className=\"PostDetails__remove-button button\"\n                      onClick={() => handleRemoveComment(comment)}\n                    >\n                      X\n                    </button>\n                    <p>{comment.name}</p>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </section>\n\n          <section>\n            <div className=\"PostDetails__form-wrapper\">\n              <NewCommentForm\n                postId={postId}\n                updateComments={currentComments}\n              />\n            </div>\n          </section>\n        </>\n      )}\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { PostsList } from './components/PostsList';\nimport { PostDetails } from './components/PostDetails';\nimport { getPosts } from './api/posts';\nimport { getUsers } from './api/users';\n\nconst App: React.FC = () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [selectedPostId, setSelectedPostId] = useState(0);\n  const [userId, setUserId] = useState(0);\n  const [users, setUsers] = useState<User[]>([]);\n\n  const changeOpenPost = (value: number) => {\n    setSelectedPostId(value);\n  };\n\n  const getAllPosts = async () => {\n    setPosts(await getPosts(userId));\n  };\n\n  const getAllUsers = async () => {\n    setUsers(await getUsers());\n  };\n\n  useEffect(() => {\n    getAllPosts();\n    getAllUsers();\n  }, []);\n\n  useEffect(() => {\n    getAllPosts();\n  }, [userId]);\n\n  return (\n    <div className=\"App\">\n      <header className=\"App__header\">\n        <label htmlFor=\"user-selector\">\n          Select a user: &nbsp;\n\n          <select\n            className=\"App__user-selector\"\n            id=\"user-selector\"\n            value={userId}\n            onChange={(event) => {\n              setUserId(+event.target.value);\n            }}\n          >\n            <option value=\"0\">All users</option>\n            {users.map((user) => (\n              <option value={user.id}>{user.name}</option>\n            ))}\n          </select>\n        </label>\n      </header>\n\n      <main className=\"App__main\">\n        <div className=\"App__sidebar\">\n          <PostsList\n            posts={posts}\n            openPost={selectedPostId}\n            setOpenPost={changeOpenPost}\n          />\n        </div>\n\n        <div className=\"App__content\">\n          <PostDetails\n            postId={selectedPostId}\n          />\n        </div>\n      </main>\n    </div>\n  );\n};\n\nexport default App;\n","import { BASE_URL } from './api';\n\nexport const getUsers = () => {\n  return fetch(`${BASE_URL}/users`)\n    .then(response => response.json());\n};\n","import ReactDOM from 'react-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}